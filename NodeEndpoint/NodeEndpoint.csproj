<Project Sdk="Microsoft.NET.Sdk.Web">

  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFramework>net8.0</TargetFramework>
    <Nullable>enable</Nullable>
    <ImplicitUsings>enable</ImplicitUsings>
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
    <RootNamespace>GeoscientistToolkit.NodeEndpoint</RootNamespace>
    <AssemblyName>NodeEndpoint</AssemblyName>
  </PropertyGroup>

  <ItemGroup>
    <!-- Reference simulation files from parent project -->
    <Compile Include="..\Analysis\**\*.cs" LinkBase="Analysis" />
    <Compile Include="..\Network\**\*.cs" LinkBase="Network" />
    <Compile Include="..\Data\**\*.cs" LinkBase="Data" />
    <Compile Include="..\Business\**\*.cs" LinkBase="Business" />
    <Compile Include="..\Settings\**\*.cs" LinkBase="Settings" />
    <Compile Include="..\Util\**\*.cs" LinkBase="Util" />
    <Compile Include="..\OpenCL\**\*.cs" LinkBase="OpenCL" />

    <!-- Exclude UI-related files that won't work in a headless server -->
    <Compile Remove="..\**\*UI.cs" />
    <Compile Remove="..\**\*Window.cs" />
    <Compile Remove="..\**\*Tool.cs" />
    <Compile Remove="..\UI\**\*.cs" />
    <Compile Remove="..\AddIns\**\*.cs" />
  </ItemGroup>

  <ItemGroup>
    <!-- ASP.NET Core for REST API -->
    <PackageReference Include="Microsoft.AspNetCore.OpenApi" Version="8.0.0" />
    <PackageReference Include="Swashbuckle.AspNetCore" Version="6.5.0" />

    <!-- Math and Numerics -->
    <PackageReference Include="MathNet.Numerics" Version="5.0.0" />
    <PackageReference Include="MathNet.Numerics.MKL.Win-x64" Version="3.0.0" />

    <!-- OpenCL for GPU compute -->
    <PackageReference Include="Silk.NET.OpenCL" Version="2.21.0" />
    <PackageReference Include="Silk.NET.OpenCL.Extensions.KHR" Version="2.21.0" />

    <!-- Image processing -->
    <PackageReference Include="SixLabors.ImageSharp" Version="3.1.5" />
    <PackageReference Include="OpenCvSharp4" Version="4.10.0.20240616" />
    <PackageReference Include="OpenCvSharp4.runtime.ubuntu.22.04-x64" Version="4.10.0.20240616" />

    <!-- Geospatial -->
    <PackageReference Include="GDAL" Version="3.9.1" />
    <PackageReference Include="GDAL.Native" Version="3.9.1" />
    <PackageReference Include="NetTopologySuite" Version="2.5.0" />
    <PackageReference Include="ProjNET" Version="2.0.0" />

    <!-- Data handling -->
    <PackageReference Include="CsvHelper" Version="33.0.1" />
    <PackageReference Include="ClosedXML" Version="0.104.1" />
    <PackageReference Include="MetadataExtractor" Version="2.8.1" />

    <!-- ML/AI -->
    <PackageReference Include="Microsoft.ML.OnnxRuntime" Version="1.19.2" />

    <!-- Chemistry -->
    <PackageReference Include="Chemistry" Version="1.0.3" />

    <!-- JSON serialization -->
    <PackageReference Include="Newtonsoft.Json" Version="13.0.3" />
  </ItemGroup>

</Project>
